# ğŸš€ HELIXç³»ç»Ÿå¯åŠ¨æŒ‡å—ä¸ç«¯å£ç®¡ç†è§„èŒƒ

## ğŸ“‹ é—®é¢˜è¯Šæ–­ä¸è§£å†³æ–¹æ¡ˆ

### æ ¹æœ¬é—®é¢˜åˆ†æ
1. **"Failed to fetch"é”™è¯¯åŸå› **ï¼š
   - å‰ç«¯ä½¿ç”¨ `window.location.origin` åŠ¨æ€è·å–APIåœ°å€
   - å½“é€šè¿‡æŸäº›æ–¹å¼è®¿é—®æ—¶ï¼Œå¯èƒ½è·å–åˆ°é”™è¯¯çš„origin
   - æµè§ˆå™¨çš„CORSç­–ç•¥é˜»æ­¢è·¨åŸŸè¯·æ±‚

2. **ç³»ç»Ÿå¤æ‚æ€§é—®é¢˜**ï¼š
   - ä¸»ç³»ç»Ÿä¾èµ–æ•°æ®åº“ï¼Œå¯åŠ¨å¤±è´¥
   - ç®€åŒ–ç‰ˆæœ¬APIå¯ä»¥è¿è¡Œï¼Œä½†å‰åç«¯é€šä¿¡æœ‰é—®é¢˜
   - ç«¯å£é…ç½®æ··ä¹±ï¼ˆ8000 vs 8001ï¼‰

## âœ… è§£å†³æ–¹æ¡ˆï¼šç»Ÿä¸€ç«¯å£è§„èŒƒ

### ç«¯å£åˆ†é…æ ‡å‡†
```
8000 - ä¸»ç³»ç»ŸAPIï¼ˆéœ€è¦å®Œæ•´ç¯å¢ƒï¼‰
8001 - ç®€åŒ–APIï¼ˆç”¨äºå¼€å‘æµ‹è¯•ï¼‰
8080 - è°ƒè¯•å·¥å…·å’Œæ–‡æ¡£æœåŠ¡
```

### æ ‡å‡†å¯åŠ¨æµç¨‹

#### æ–¹æ¡ˆAï¼šç®€åŒ–APIæ¨¡å¼ï¼ˆæ¨èç”¨äºå¿«é€Ÿæµ‹è¯•ï¼‰
```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /home/canoezhang/Projects/aiagent

# 2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# 3. å¯åŠ¨ç®€åŒ–APIæœåŠ¡å™¨
python simple_api.py

# 4. è®¿é—®ç³»ç»Ÿ
æµè§ˆå™¨æ‰“å¼€: http://localhost:8001
```

#### æ–¹æ¡ˆBï¼šå®Œæ•´ç³»ç»Ÿæ¨¡å¼ï¼ˆéœ€è¦æ•°æ®åº“ï¼‰
```bash
# 1. ç¡®ä¿PostgreSQLè¿è¡Œ
docker ps | grep postgres

# 2. å¯åŠ¨å®Œæ•´ç³»ç»Ÿ
source venv/bin/activate
python start_system.py

# 3. è®¿é—®ç³»ç»Ÿ
æµè§ˆå™¨æ‰“å¼€: http://localhost:8000
```

## ğŸ”§ æ•…éšœæ’æŸ¥æ­¥éª¤

### 1. éªŒè¯æœåŠ¡å™¨çŠ¶æ€
```bash
# æ£€æŸ¥ç«¯å£ç›‘å¬
netstat -tln | grep -E "(8000|8001)"

# æ£€æŸ¥è¿›ç¨‹
ps aux | grep -E "(simple_api|uvicorn)"

# æµ‹è¯•APIå¥åº·çŠ¶æ€
curl http://localhost:8001/api/v1/health
```

### 2. æµè§ˆå™¨è°ƒè¯•
1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
2. æ£€æŸ¥Consoleæ ‡ç­¾é¡µçš„é”™è¯¯ä¿¡æ¯
3. æ£€æŸ¥Networkæ ‡ç­¾é¡µçš„å¤±è´¥è¯·æ±‚
4. æŸ¥çœ‹å…·ä½“çš„é”™è¯¯ç±»å‹ï¼š
   - `net::ERR_CONNECTION_REFUSED` - æœåŠ¡å™¨æœªè¿è¡Œ
   - `CORS error` - è·¨åŸŸé—®é¢˜
   - `Failed to fetch` - ç½‘ç»œè¿æ¥é—®é¢˜

### 3. ä½¿ç”¨è°ƒè¯•å·¥å…·
```bash
# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è°ƒè¯•é¡µé¢
http://localhost:8001/debug_frontend.html
```

## ğŸ›¡ï¸ é˜²ç«å¢™å’Œå®‰å…¨è®¾ç½®

### Linuxé˜²ç«å¢™æ£€æŸ¥
```bash
# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
sudo ufw status

# å¦‚éœ€è¦ï¼Œä¸´æ—¶å…è®¸ç«¯å£
sudo ufw allow 8001/tcp
```

### æµè§ˆå™¨å®‰å…¨è®¾ç½®
- ç¡®ä¿æµè§ˆå™¨å…è®¸localhostè¿æ¥
- ç¦ç”¨å¯èƒ½å¹²æ‰°çš„æµè§ˆå™¨æ‰©å±•
- å°è¯•ä½¿ç”¨éšç§/æ— ç—•æ¨¡å¼

## ğŸ“ æœ€ä½³å®è·µå»ºè®®

### 1. å¼€å‘ç¯å¢ƒé…ç½®
```javascript
// frontend/index.html - å¼€å‘ç¯å¢ƒç¡¬ç¼–ç APIåœ°å€
const API_BASE = 'http://localhost:8001';
```

### 2. ç”Ÿäº§ç¯å¢ƒé…ç½®
```javascript
// ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶
const API_BASE = process.env.REACT_APP_API_URL || window.location.origin;
```

### 3. CORSé…ç½®è§„èŒƒ
```python
# å¼€å‘ç¯å¢ƒ - å®½æ¾é…ç½®
allow_origins=["*"]

# ç”Ÿäº§ç¯å¢ƒ - ä¸¥æ ¼é…ç½®
allow_origins=["https://your-domain.com"]
```

## ğŸš¨ å¸¸è§é”™è¯¯åŠè§£å†³

### é”™è¯¯1ï¼šFailed to fetch
**åŸå› **ï¼šå‰ç«¯æ— æ³•è¿æ¥åˆ°åç«¯API
**è§£å†³**ï¼š
1. ç¡®è®¤APIæœåŠ¡å™¨è¿è¡Œåœ¨æ­£ç¡®ç«¯å£
2. ä¿®æ”¹å‰ç«¯ç¡¬ç¼–ç APIåœ°å€
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### é”™è¯¯2ï¼šCORS blocked
**åŸå› **ï¼šè·¨åŸŸè¯·æ±‚è¢«é˜»æ­¢
**è§£å†³**ï¼š
1. ç¡®ä¿åç«¯CORSä¸­é—´ä»¶æ­£ç¡®é…ç½®
2. å‰åç«¯ä½¿ç”¨ç›¸åŒçš„origin

### é”™è¯¯3ï¼šConnection refused
**åŸå› **ï¼šæœåŠ¡å™¨æœªå¯åŠ¨æˆ–ç«¯å£é”™è¯¯
**è§£å†³**ï¼š
1. ç¡®è®¤æœåŠ¡å™¨è¿›ç¨‹å­˜åœ¨
2. æ£€æŸ¥ç«¯å£ç›‘å¬çŠ¶æ€
3. ä½¿ç”¨æ­£ç¡®çš„å¯åŠ¨å‘½ä»¤

## ğŸ“Š ç³»ç»Ÿå¥åº·æ£€æŸ¥æ¸…å•

- [ ] PostgreSQLå®¹å™¨è¿è¡Œæ­£å¸¸ï¼ˆå¦‚æœä½¿ç”¨ä¸»ç³»ç»Ÿï¼‰
- [ ] APIæœåŠ¡å™¨è¿›ç¨‹å­˜åœ¨
- [ ] ç«¯å£8001æ­£åœ¨ç›‘å¬
- [ ] èƒ½å¤Ÿé€šè¿‡curlè®¿é—®API
- [ ] æµè§ˆå™¨èƒ½å¤ŸåŠ è½½å‰ç«¯é¡µé¢
- [ ] å‰ç«¯èƒ½å¤ŸæˆåŠŸè°ƒç”¨API

## ğŸ¯ å¿«é€Ÿä¿®å¤å‘½ä»¤

```bash
# æ€æ­»æ‰€æœ‰ç›¸å…³è¿›ç¨‹å¹¶é‡å¯
pkill -f "python.*api"
source venv/bin/activate
nohup python simple_api.py > server.log 2>&1 &

# æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
tail -f server.log

# æµ‹è¯•API
curl -X POST http://localhost:8001/api/v1/jobs \
  -H "Content-Type: application/json" \
  -d '{"chat_input": "æµ‹è¯•ä»»åŠ¡åˆ›å»º", "session_id": "test"}'
```

---

**è®°ä½**ï¼šå§‹ç»ˆä½¿ç”¨ **http://localhost:8001** è®¿é—®ç®€åŒ–ç‰ˆæœ¬ç³»ç»Ÿï¼